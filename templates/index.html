<!-- templates/index.html - Simple & Clean -->
{% extends "base.html" %}

{% block title %}Hoops Tracker - NBA Statistics Platform{% endblock %}

{% block extra_head %}
<style>
    /* Remove any extra padding from main */
    main {
        padding-top: 0 !important;
    }
    
    /* Simple hero section */
    .hero {
        background-color: #2c3e50;
        color: white;
        padding: 4rem 0;
    }
    
    /* Clean section spacing */
    .section {
        padding: 3rem 0;
    }
    
    /* Simple card styling */
    .simple-card {
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 2rem;
        text-align: center;
        height: 100%;
        background: white;
    }
    
    .simple-card i {
        font-size: 2.5rem;
        color: #c9302c;
        margin-bottom: 1rem;
    }
    
    /* Simple stats */
    .stat-box {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 1.5rem;
        text-align: center;
    }
    
    .stat-number {
        font-size: 2rem;
        font-weight: bold;
        color: #c9302c;
        margin-bottom: 0.5rem;
    }
    
    .stat-text {
        color: #6c757d;
        font-size: 0.9rem;
    }
    
    /* Game card */
    .game-card {
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        background: white;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="display-4 mb-3">
                    <i class="bi bi-trophy"></i> Hoops Tracker
                </h1>
                <p class="lead mb-4">NBA statistics and roster management platform</p>
                {% if not current_user %}
                <a href="{{ url_for('auth.register') }}" class="btn btn-primary btn-lg me-2">Get Started</a>
                <a href="{{ url_for('auth.login') }}" class="btn btn-outline-light btn-lg">Login</a>
                {% else %}
                <a href="{{ url_for('dashboard') }}" class="btn btn-primary btn-lg me-2">Dashboard</a>
                <a href="{{ url_for('players') }}" class="btn btn-outline-light btn-lg">Browse Players</a>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="section">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h2>What You Can Do</h2>
                <p class="text-muted">Simple tools for NBA fans</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-md-4">
                <div class="simple-card">
                    <i class="bi bi-people"></i>
                    <h5>Player Stats</h5>
                    <p>View detailed NBA player statistics and performance data.</p>
                    <a href="{{ url_for('players') }}" class="btn btn-outline-primary">Browse Players</a>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="simple-card">
                    <i class="bi bi-shield"></i>
                    <h5>Team Info</h5>
                    <p>Explore all 30 NBA teams with rosters and recent games.</p>
                    <a href="{{ url_for('teams') }}" class="btn btn-outline-primary">View Teams</a>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="simple-card">
                    <i class="bi bi-list-task"></i>
                    <h5>My Rosters</h5>
                    <p>Create and manage custom NBA rosters with your favorite players.</p>
                    {% if current_user %}
                        <a href="{{ url_for('rosters') }}" class="btn btn-outline-primary">My Rosters</a>
                    {% else %}
                        <a href="{{ url_for('auth.register') }}" class="btn btn-outline-primary">Sign Up</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="section bg-light">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h3>Platform Stats</h3>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number">30</div>
                    <div class="stat-text">NBA Teams</div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="players-count">-</div>
                    <div class="stat-text">Active Players</div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="games-count">-</div>
                    <div class="stat-text">Games Tracked</div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="stat-box">
                    <div class="stat-number" id="users-count">-</div>
                    <div class="stat-text">Users</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Recent Games Section -->
<section class="section">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h3>Recent Games</h3>
            </div>
        </div>
        
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div id="recent-games">
                    <div class="text-center py-3">
                        <div class="spinner-border" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2 text-muted">Loading games...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    loadStats();
    loadGames();
});

async function loadStats() {
    try {
        const response = await fetch('/api/admin/stats');
        if (response.ok) {
            const result = await response.json();
            if (result.success) {
                document.getElementById('players-count').textContent = result.data.players_count || '0';
                document.getElementById('games-count').textContent = result.data.games_count || '0';
                document.getElementById('users-count').textContent = result.data.users_count || '0';
            }
        }
    } catch (error) {
        console.log('Could not load stats');
        document.getElementById('players-count').textContent = '0';
        document.getElementById('games-count').textContent = '0';
        document.getElementById('users-count').textContent = '0';
    }
}

async function loadGames() {
    try {
        const response = await fetch('/api/games?limit=5');
        if (response.ok) {
            const result = await response.json();
            if (result.success && result.data.length > 0) {
                showGames(result.data);
            } else {
                showNoGames();
            }
        } else {
            showNoGames();
        }
    } catch (error) {
        showNoGames();
    }
}

function showGames(games) {
    const html = games.map(game => `
        <div class="game-card">
            <div class="row align-items-center">
                <div class="col-sm-6">
                    <strong>${game.away_team?.abbreviation || 'TBD'}</strong> @ 
                    <strong>${game.home_team?.abbreviation || 'TBD'}</strong>
                </div>
                <div class="col-sm-3 text-center">
                    <span class="badge bg-primary">${game.away_score || 0} - ${game.home_score || 0}</span>
                </div>
                <div class="col-sm-3 text-end">
                    <small class="text-muted">
                        ${game.game_date ? new Date(game.game_date).toLocaleDateString() : 'TBD'}
                    </small>
                </div>
            </div>
        </div>
    `).join('');
    
    document.getElementById('recent-games').innerHTML = html;
}

function showNoGames() {
    document.getElementById('recent-games').innerHTML = `
        <div class="text-center py-3 text-muted">
            <p>No recent games available</p>
        </div>
    `;
}
</script>
{% endblock %}